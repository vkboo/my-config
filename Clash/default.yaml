# Auto-generated runtime config, do not edit.
# 自动生成的运行配置，请勿编辑。
mode: rule
mixed-port: 7890
unified-delay: true
tcp-concurrent: true
profile:
  store-selected: true
  store-fake-ip: true
sniffer:
  enable: true
  sniff:
    HTTP:
      ports:
      - 80
      - 8080-8880
      override-destination: true
    TLS:
      ports:
      - 443
      - 8443
    QUIC:
      ports:
      - 443
      - 8443
  skip-domain:
  - "Mijia Cloud"
  - "+.push.apple.com"
dns:
  enable: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
  - 223.5.5.5
  - 119.29.29.29
  fake-ip-filter:
  - "*.lan"
  - "*.local"
  - rule-set:Lan
  - rule-set:ChinaMax
proxy-providers:
  ASH:
    type: http
    url: "{{https://portal.ash.do/#/invite}}"
    interval: 86400
    health-check:
      enable: true
      url: 'https://www.google.com/generate_204'
      interval: 300
proxies:
proxy-groups:
- name: Proxy
  type: select
  proxies:
  - Hong Kong
  - Singapore
  - Taiwan
  - United States
  - Japan
  - Korea
  - Other
- name: Hong Kong
  type: select
  use:
  - ASH
  filter: "(?i)(香港|HK|Hong\\s?Kong|HKG)"
  proxies:
  - HK Auto
- name: Singapore
  type: select
  use:
  - ASH
  filter: "(?i)(新加坡|SG|Singapore)"
  proxies:
  - SG Auto
- name: Taiwan
  type: select
  use:
  - ASH
  filter: "(?i)(台湾|台灣|TW|Taiwan)"
  proxies:
  - TW Auto
- name: United States
  type: select
  use:
  - ASH
  filter: "(?i)(美国|美國|US|USA|United\\s?States)"
  proxies:
  - US Auto
- name: Japan
  type: select
  use:
  - ASH
  filter: "(?i)(日本|JP|Japan)"
  proxies:
  - JP Auto
- name: Korea
  type: select
  use:
  - ASH
  filter: "(?i)(韩国|韓國|KR|Korea)"
  proxies:
  - KR Auto
- name: Other
  type: select
  use:
  - ASH
  exclude-filter: "(?i)(香港|HK|Hong\\s?Kong|HKG|新加坡|SG|Singapore|台湾|台灣|TW|Taiwan|美国|美國|US|USA|United\\s?States|日本|JP|Japan|韩国|韓國|KR|Korea)"
- name: HK Auto
  type: url-test
  use:
  - ASH
  filter: "(?i)(香港|HK|Hong\\s?Kong|HKG)"
  url: "https://www.gstatic.com/generate_204"
  interval: 300
  tolerance: 50
- name: SG Auto
  type: url-test
  use:
  - ASH
  filter: "(?i)(新加坡|SG|Singapore)"
  url: "https://www.gstatic.com/generate_204"
  interval: 300
  tolerance: 50
- name: TW Auto
  type: url-test
  use:
  - ASH
  filter: "(?i)(台湾|台灣|TW|Taiwan)"
  url: "https://www.gstatic.com/generate_204"
  interval: 300
  tolerance: 50
- name: US Auto
  type: url-test
  use:
  - ASH
  filter: "(?i)(美国|美國|US|USA|United\\s?States)"
  url: "https://www.gstatic.com/generate_204"
  interval: 300
  tolerance: 50
- name: JP Auto
  type: url-test
  use:
  - ASH
  filter: "(?i)(日本|JP|Japan)"
  url: "https://www.gstatic.com/generate_204"
  interval: 300
  tolerance: 50
- name: KR Auto
  type: url-test
  use:
  - ASH
  filter: "(?i)(韩国|韓國|KR|Korea)"
  url: "https://www.gstatic.com/generate_204"
  interval: 300
  tolerance: 50
rules:
- AND,((DST-PORT,443),(NETWORK,UDP),(NOT,((GEOIP,CN)))),REJECT
- RULE-SET,Lan,DIRECT
- RULE-SET,Direct,DIRECT
- RULE-SET,OpenAI,Taiwan
- RULE-SET,Gemini,Taiwan
- RULE-SET,Proxy,Proxy
- RULE-SET,ChinaMax,DIRECT
- GEOIP,CN,DIRECT,no-resolve
- MATCH,Proxy
classical:
  type: http
  behavior: classical
  format: yaml
  interval: 86400
rule-providers:
  Lan:
    <<:
      type: http
      behavior: classical
      format: yaml
      interval: 86400
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml"
  Direct:
    <<:
      type: http
      behavior: classical
      format: yaml
      interval: 86400
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml"
  Proxy:
    <<:
      type: http
      behavior: classical
      format: yaml
      interval: 86400
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy.yaml"
  OpenAI:
    <<:
      type: http
      behavior: classical
      format: yaml
      interval: 86400
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml"
  Gemini:
    <<:
      type: http
      behavior: classical
      format: yaml
      interval: 86400
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml"
  ChinaMax:
    <<:
      type: http
      behavior: classical
      format: yaml
      interval: 86400
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax/ChinaMax_Classical.yaml"
external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-name: zashboard
external-ui-url: https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip
ipv6: false
allow-lan: false
authentication: []
skip-auth-prefixes:
- 127.0.0.0/8
find-process-mode: always
log-level: warning
secret: clashmac2026
geo-update-interval: 24
geox-url:
  mmdb: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.metadb
  geosite: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  asn: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb
  geoip: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
global-ua: ClashMeta/26.7-beta.4
